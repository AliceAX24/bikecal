<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Buzz Site</title>
    <style>
    body {
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        height: 100vh;
        margin: 0;
        background: #111;
        font-family: Arial, sans-serif;

        /* evita zoom por gestos em alguns navegadores */
        touch-action: manipulation;
    }

    button {
        font-size: 36px;
        padding: 30px 60px;
        border: none;
        border-radius: 16px;
        cursor: pointer;
        background: #ffcc00;
        color: #000;

        /* tamanho fixo e est√°vel */
        width: 320px;
        max-width: 90vw;
    }

    #buzz {
        margin-bottom: 30px;
        font-size: 40px;
    }

    .bottom-buttons {
        display: flex;
        flex-direction: column; /* üîΩ um embaixo do outro */
        gap: 30px;
    }

    .arrow {
        font-size: 48px;
    }
</style>
</head>
<body>

    <button id="buzz">Buzz</button>

    <div class="bottom-buttons">
        <button class="arrow" id="left">‚¨ÖÔ∏è</button>
        <button class="arrow" id="right">‚û°Ô∏è</button>
    </div>

    <!-- Audios MP3 -->
    <audio id="audioLeft" src="a esquerda.mp3"></audio>
    <audio id="audioRight" src="a direita.mp3"></audio>

    <script>
    // ======================
    // WAKE LOCK (manter tela ligada)
    // ======================
    let wakeLock = null;

    async function keepScreenAwake() {
        try {
            wakeLock = await navigator.wakeLock.request("screen");
            console.log("Tela mantida ligada üîÜ");

            wakeLock.addEventListener("release", () => {
                console.log("Wake Lock liberado");
                wakeLock = null;
            });
        } catch (err) {
            console.error("Wake Lock erro:", err);
        }
    }

    function ensureWakeLock() {
        if ("wakeLock" in navigator && !wakeLock) {
            keepScreenAwake();
        }
    }

    // ======================
    // BUZZ (som de buzina)
    // ======================
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();

    function playBuzz() {
        ensureWakeLock(); // ativa wake lock no primeiro toque

        const oscillator = audioContext.createOscillator();
        const gainNode = audioContext.createGain();

        oscillator.type = "sawtooth";
        oscillator.frequency.setValueAtTime(432, audioContext.currentTime);

        gainNode.gain.setValueAtTime(0.5, audioContext.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(
            0.01,
            audioContext.currentTime + 0.5
        );

        oscillator.connect(gainNode);
        gainNode.connect(audioContext.destination);

        oscillator.start();
        oscillator.stop(audioContext.currentTime + 0.5);
    }

    document.getElementById("buzz").addEventListener("click", playBuzz);

    // ======================
    // MP3s
    // ======================
    document.getElementById("left").addEventListener("click", () => {
        ensureWakeLock();

        const audio = document.getElementById("audioLeft");
        audio.currentTime = 0;
        audio.play();
    });

    document.getElementById("right").addEventListener("click", () => {
        ensureWakeLock();

        const audio = document.getElementById("audioRight");
        audio.currentTime = 0;
        audio.play();
    });

    // ======================
    // Reativa se o usu√°rio voltar para a aba
    // ======================
    document.addEventListener("visibilitychange", () => {
        if (document.visibilityState === "visible") {
            ensureWakeLock();
        }
    });
</script>

</body>
</html>
